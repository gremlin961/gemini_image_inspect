Copyright 2024 Google, LLC. This software is provided as-is, without warranty or representation for any use or purpose. Your use of it is subject to your agreement with Google.

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.

# Gemini Chat with Image Output

This project demonstrates how to use Google's Gemini models to engage in a chat-based interaction that includes generating inspirational images. The Jupyter Notebook (`Gemini_Chat_Image_Inspect.ipynb`) provides a step-by-step guide to:

1.  **Setting up the environment**: Importing necessary Python libraries and configuring the Gemini API key.
2.  **Loading user context**: Incorporating user profile data and a base inspiration image.
3.  **Interacting with the Gemini model**: Initializing a chat session with `gemini-2.0-flash-exp-image-generation`, sending initial prompts, user profile, and the base image.
4.  **Generating content**: Engaging in an interactive chat where the model provides text responses and generates new images based on user input and predefined parameters (tone, room, mood, accents, color).
5.  **Saving output**: Storing the last generated image.
6.  **Analyzing chat history**: Using another Gemini model (`gemini-2.0-flash-exp`) to review the chat history, identify user intent, style preferences, and overall sentiment.

## Prerequisites

*   Python 3.x
*   Jupyter Notebook or JupyterLab
*   Google Gemini API Key (obtainable from [AI Studio](https://aistudio.google.com/))
*   Required Python libraries (install via pip):
    *   `google-generativeai`
    *   `PyYAML`
    *   `Pillow`
    *   `ipython`
    *   `nest_asyncio` (if running in an environment that needs it for asyncio)

    You can typically install these using:
    ```bash
    pip install google-generativeai PyYAML Pillow ipython nest_asyncio
    ```

## Setup

1.  **Clone the repository (if applicable) or download the files.**
2.  **Create your Gemini API Key**:
    *   Go to [AI Studio](https://aistudio.google.com/).
    *   Create a new API key.
3.  **Configure API Key**:
    *   The notebook expects the API key to be in a file named `parameters.yaml` (though the notebook code mentions `my_parameters.yaml`, it's best to stick to one or clarify in the notebook). Create a `parameters.yaml` file in the root directory with the following structure:
        ```yaml
        GeminiKey: YOUR_API_KEY_HERE
        ```
        Replace `YOUR_API_KEY_HERE` with your actual Gemini API key.
4.  **Prepare input files**:
    *   Ensure you have the `user_profile.json` file with user data.
    *   Ensure you have an initial inspiration image. The notebook uses `disco-kitchen.jpg`. You can replace this with your own image and update the `image_filename` variable in the notebook.

## Running the Notebook

1.  Open the `Gemini_Chat_Image_Inspect.ipynb` file in Jupyter Notebook or JupyterLab.
2.  Run the cells sequentially.
3.  When prompted in the "While loop for more advanced chat session" section, enter your design requests or type "End" to quit the interactive chat.

## Key Files

*   `Gemini_Chat_Image_Inspect.ipynb`: The main Jupyter Notebook with the code and explanations.
*   `parameters.yaml`: Configuration file to store your Gemini API key (you need to create this).
*   `user_profile.json`: Sample user profile data.
*   `disco-kitchen.jpg`: Sample inspiration image.
*   `output.jpg`: The image generated by the model during the last interaction will be saved here.
*   `README.md`: This file.

## How it Works

The notebook initializes the Gemini client and creates a chat session configured for both text and image responses. It sends an initial set of instructions, user profile information, and a base image to set the context for the AI.

An interactive loop then allows the user to provide prompts. The Gemini model processes these prompts along with the established context to generate relevant text responses and new images.

Finally, the notebook demonstrates how to use another Gemini model to analyze the entire chat history, providing insights into the user's intent and preferences.
